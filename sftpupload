CREATE TABLE position (
    id INT IDENTITY(1,1) PRIMARY KEY,
    type NVARCHAR(50) NOT NULL,
    positionDate DATE NOT NULL,
    batsSecurityId NVARCHAR(255),
    bookId NVARCHAR(255),
    notional DECIMAL(18, 2),
    averageCost DECIMAL(18, 2),
    status NVARCHAR(50),
    lastUpdate DATETIME
);

import org.jdbi.v3.sqlobject.statement.SqlUpdate;
import org.jdbi.v3.sqlobject.customizer.BindBean;
import org.jdbi.v3.sqlobject.statement.SqlQuery;

import java.util.List;

public interface PositionDao {

    @SqlUpdate("INSERT INTO position (type, positionDate, batsSecurityId, bookId, notional, averageCost, status, lastUpdate) " +
               "VALUES (:type, :positionDate, :batsSecurityId, :bookId, :notional, :averageCost, :status, :lastUpdate)")
    void insert(@BindBean Position position);

    @SqlQuery("SELECT * FROM position WHERE id = :id")
    Position findById(@Bind("id") int id);

    @SqlQuery("SELECT * FROM position")
    List<Position> findAll();

    @SqlUpdate("UPDATE position SET type = :type, positionDate = :positionDate, batsSecurityId = :batsSecurityId, bookId = :bookId, " +
               "notional = :notional, averageCost = :averageCost, status = :status, lastUpdate = :lastUpdate WHERE id = :id")
    void update(@BindBean Position position);

    @SqlUpdate("DELETE FROM position WHERE id = :id")
    void deleteById(@Bind("id") int id);
}
